{
    "id": "quicksheet",
    "name": "QuickSheet",
    "description": "Quickly create a new sheet in Smartsheet with Google Gemini.",
    "steps": [
        {
            "stepId": "1-gather-information",
            "title": "Step 1: Gather Information",
            "type": "form",
            "content": "Fill out the following fields.",
            "fields": [
                {
                    "id": "sheetId",
                    "label": "Sheet ID",
                    "type": "text",
                    "required": true,
                    "attributes": {
                        "placeholder": "Enter Sheet ID"
                    }
                },
                {
                    "id": "numberOfRows",
                    "label": "Number of Rows",
                    "type": "number",
                    "required": true,
                    "attributes": {
                        "placeholder": "Enter a number between 1 and 100"
                    }
                },
                {
                    "id": "rowAction",
                    "label": "How should we handle rows?",
                    "type": "select",
                    "required": true,
                    "options": [
                        {
                            "label": "Add new rows",
                            "value": "add_rows"
                        },
                        {
                            "label": "Update existing rows",
                            "value": "update_rows"
                        },
                        {
                            "label": "Delete existing and add new rows",
                            "value": "replace_rows"
                        }
                    ]
                }
            ],
            "actions": [
                {
                    "type": "navigation",
                    "actionId": "goToNextStep",
                    "label": "Continue",
                    "onSuccess": {
                        "goToStep": "2-use-case"
                    },
                    "onError": {
                        "goToStep": "6-error"
                    }
                }
            ]
        },
        {
            "stepId": "2-use-case",
            "title": "Step 2: Use Case",
            "type": "form",
            "content": "Describe your use case. We will use this information to generate the data on your sheet.",
            "fields": [
                {
                    "id": "useCase",
                    "label": "Use Case",
                    "type": "textarea",
                    "required": true,
                    "attributes": {
                        "placeholder": "Enter a detailed description of your use case"
                    }
                }
            ],
            "actions": [
                {
                    "type": "worker",
                    "actionId": "getUseCase",
                    "label": "Continue",
                    "backend": {
                        "workerFunctionName": "toolkit-action-gemini-prompt",
                        "inputSource": "formData",
                        "outputKey": "parsedColumns",
                        "staticContext": {
                            "prompt": "I am creating a Smartsheet sheet for a {useCase} use case. Please provide a list of column headers that would be useful information for me to track on this sheet."
                        }
                    },
                    "onSuccess": [
                        {
                            "condition": null,
                            "then": {
                                "goToStep": "3-verify-columns"
                            }
                        }
                    ],
                    "onError": {
                        "goToStep": "6-error"
                    }
                }
            ]
        },
        {
            "stepId": "3-verify-columns",
            "title": "Step 3: Verify Columns",
            "type": "form",
            "content": "Please verify the columns that will be created in your new sheet.",
            "fields": [
                {
                    "id": "columns",
                    "label": "Column Data",
                    "type": "grid",
                    "sourceDataKey": "parsedColumns",
                    "sourceDataPath": "rows"
                }
            ],
            "actions": [
                {
                    "type": "worker",
                    "actionId": "createColumns",
                    "label": "Create Columns in Smartsheet",
                    "backend": {
                        "workerFunctionName": "toolkit-action-create-columns",
                        "inputSource": "formData",
                        "outputKey": "createdColumns"
                    },
                    "onSuccess": [
                        {
                            "condition": null,
                            "then": {
                                "goToStep": "4-retrieve-grid"
                            }
                        }
                    ],
                    "onError": {
                        "goToStep": "6-error"
                    }
                }
            ]
        },
        {
            "stepId": "4-retrieve-grid",
            "title": "Step 4: Retrieve Grid Data",
            "type": "form",
            "content": "Proceed to the next step to verify the extracted grid data.",
            "actions": [
                {
                    "type": "worker",
                    "actionId": "retrieveGridData",
                    "label": "Retrieve Grid Data",
                    "backend": {
                        "workerFunctionName": "toolkit-action-gemini-prompt",
                        "inputSource": "formData",
                        "outputKey": "parsedRows",
                        "staticContext": {
                            "prompt": "Follow these instructions carefully: You will receive a list of column data that belong to a Smartsheet. Each column data has a column_name and a column_type. You must generate a list of dictionaries, where each dictionary represents a row of data for the Smartsheet. The keys of the dictionary should match the column names, and the values should be examples of the data you want to include in each column. DATE should be formatted as YYYY-MM-DD (ISO 8601). DATETIME should be formatted as YYYY-MM-DDTHH:MM:SSZ (ISO 8601) else blank. CONTACT_LIST should be a valid email address. (e.g., 'johndoe@example.com'). If the column is a DURATION, it MUST be an integer followed by the letter d. If the column represents a PERCENTAGE, it should be a decimal between 0 and 1 (e.g., 0.6 without a percent symbol). If the column is a CHECKBOX, it should be either true or false. If the column represents a number or monetary value return an integer only (no additional text like $). If the column is a DURATION, it MUST be an integer followed by the letter d. If the column properties contains a list of options, select one of those but make it random and don't disperse evenly. Return {numberOfRows} rows. Column Data: {columns}. User Description of Data: {useCase}. Generate the rows of data and return them as a JSON array."
                        }
                    },
                    "onSuccess": [
                        {
                            "condition": null,
                            "then": {
                                "goToStep": "5-verify-rows"
                            }
                        }
                    ],
                    "onError": {
                        "goToStep": "6-error"
                    }
                }
            ]
        },
        {
            "stepId": "5-verify-rows",
            "title": "Step 5: Verify Rows",
            "type": "form",
            "content": "Review the row data. If it looks correct, import it into the sheet.",
            "fields": [
                {
                    "id": "rows",
                    "label": "Row Data",
                    "type": "grid",
                    "sourceDataKey": "parsedRows",
                    "sourceDataPath": "rows",
                    "editable": false
                }
            ],
            "actions": [
                {
                    "type": "worker",
                    "actionId": "createRows",
                    "label": "Import Rows to Smartsheet",
                    "backend": {
                        "workerFunctionName": "toolkit-tools-quicksheet",
                        "inputSource": "formData",
                        "outputKey": "createdRows"
                    },
                    "onSuccess": [
                        {
                            "condition": null,
                            "then": {
                                "goToStep": "6-success"
                            }
                        }
                    ],
                    "onError": {
                        "goToStep": "6-error"
                    }
                }
            ]
        },
        {
            "stepId": "6-success",
            "title": "Import Successful!",
            "type": "success",
            "content": "The data has been successfully imported into your Smartsheet sheet."
        },
        {
            "stepId": "6-error",
            "title": "An Error Occurred",
            "type": "error",
            "content": "We couldn't process your request. Please review the error details below."
        }
    ]
}